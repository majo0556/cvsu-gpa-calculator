<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CvSU GPA & Latin Honors</title>
  <style>
    :root {
      --cvsy-green: #005f00;
      --cvsy-yellow: #ffd700;
      --bg-soft: #f2f8f2;
      --card-bg: #ffffff;
      --text-dark: #333;
      --shadow: rgba(0, 0, 0, 0.1);
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: var(--bg-soft);
      color: var(--text-dark);
      display: flex;
      justify-content: center;
      padding: 2rem;
    }
    .container {
      max-width: 800px;
      width: 100%;
    }
    h1 {
      text-align: center;
      color: var(--cvsy-green);
    }
    .form-section, .summary {
      background: var(--card-bg);
      border-radius: 0.5rem;
      padding: 1.5rem;
      box-shadow: 0 2px 8px var(--shadow);
      margin-bottom: 2rem;
    }
    .form-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .form-group label {
      font-weight: bold;
    }
    .form-group input {
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      font-size: 1rem;
    }
    .btn {
      display: inline-block;
      background: var(--cvsy-green);
      color: #fff;
      border: none;
      padding: 0.7rem 1.2rem;
      font-size: 1rem;
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background 0.2s;
      margin-right: 1rem;
    }
    .btn:hover { background: darkgreen; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    table thead {
      background: var(--cvsy-green);
      color: #fff;
    }
    table th, table td {
      padding: 0.75rem;
      border: 1px solid #ddd;
      text-align: center;
    }
    .result-card {
      text-align: center;
      padding: 1.5rem;
      font-size: 1.25rem;
      border-radius: 0.5rem;
      background: var(--cvsy-yellow);
      color: var(--cvsy-green);
      font-weight: bold;
      box-shadow: 0 2px 8px var(--shadow);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CvSU GPA & Latin Honors</h1>

    <div class="form-section">
      <h2>Add Semester</h2>
      <div class="form-group">
        <label for="sem">Semester:</label>
        <input type="text" id="sem" placeholder="e.g., 1st Sem 2025">
        
        <label for="avg">Average Grade (%):</label>
        <input type="number" id="avg" min="0" max="100" step="0.01" placeholder="e.g., 92.5">
        
        <label for="units">Total Units (excl. NSTP):</label>
        <input type="number" id="units" min="0" step="0.5" placeholder="e.g., 18">
        
        <label for="nstp">NSTP Units:</label>
        <input type="number" id="nstp" min="0" step="0.5" placeholder="e.g., 3">
      </div>
      <button class="btn" onclick="addSemester()">âž• Add Semester</button>
      <button class="btn" onclick="computeOverall()">ðŸ“Š Compute GPA</button>
    </div>

    <div class="summary">
      <h2>Semesters Entered</h2>
      <table id="sem-table">
        <thead><tr>
          <th>Semester</th><th>Avg %</th><th>Units</th><th>NSTP Units</th><th>Grade Points</th>
        </tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="result"></div>
  </div>

  <script>
    const gradeMap = [
      { min: 96.72, max: 100, pts: 1.0 },
      { min: 93.38, max: 96.71, pts: 1.25 },
      { min: 90.04, max: 93.37, pts: 1.5 },
      { min: 86.70, max: 90.03, pts: 1.75 },
      { min: 83.36, max: 86.69, pts: 2.0 },
      { min: 80.02, max: 83.35, pts: 2.25 },
      { min: 76.68, max: 80.01, pts: 2.5 },
      { min: 73.34, max: 76.67, pts: 2.75 },
      { min: 70.00, max: 73.33, pts: 3.0 },
      { min: 60.00, max: 69.99, pts: 4.0 },
      { min: 0.00, max: 59.99, pts: 5.0 }
    ];

    const sems = [];

    function percentToPoints(p) {
      const e = gradeMap.find(g => p >= g.min && p <= g.max);
      return e ? e.pts : null;
    }

    function addSemester() {
      const sem = document.getElementById('sem').value.trim();
      const avg = parseFloat(document.getElementById('avg').value);
      const units = parseFloat(document.getElementById('units').value);
      const nstp = parseFloat(document.getElementById('nstp').value) || 0;

      if (!sem || isNaN(avg) || isNaN(units)) {
        alert("Please complete all fields correctly.");
        return;
      }

      const pts = percentToPoints(avg);
      if (pts === null) {
        alert("Average% must be 0â€“100.");
        return;
      }

      const netUnits = units;
      sems.push({ sem, avg, units: netUnits, nstp, pts });

      const tbody = document.querySelector('#sem-table tbody');
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${sem}</td><td>${avg.toFixed(2)}</td><td>${units}</td>
        <td>${nstp}</td><td>${pts.toFixed(2)}</td>`;
      tbody.appendChild(row);

      // Clear fields
      document.getElementById('sem').value = '';
      document.getElementById('avg').value = '';
      document.getElementById('units').value = '';
      document.getElementById('nstp').value = '';
    }

    function computeOverall() {
      if (sems.length === 0) {
        alert("Add at least one semester.");
        return;
      }

      let totalPts = 0, totalUnits = 0;
      let lowest = 1.0, hasFail = false, hasCond4 = false;

      sems.forEach(s => {
        const pts = s.pts;
        totalPts += pts * s.units;
        totalUnits += s.units;

        if (pts > lowest) lowest = pts;
        if (pts === 5.0) hasFail = true;
        if (pts === 4.0) hasCond4 = true;
      });

      const gpa = totalPts / totalUnits;
      let honor = 'No Latin Honor';

      if (!hasFail && !hasCond4) {
        if (gpa >= 1.0 && gpa <= 1.21 && lowest <= 2.00) honor = 'Summa Cum Laude';
        else if (gpa <= 1.45 && lowest <= 2.25) honor = 'Magna Cum Laude';
        else if (gpa <= 1.75 && lowest <= 2.50) honor = 'Cum Laude';
      }

      document.getElementById('result').innerHTML = `
        <div class="result-card">
          Cumulative GPA: <strong>${gpa.toFixed(3)}</strong><br>
          Latin Honor: <strong>${honor}</strong>
        </div>`;
    }

    addSemester();
  </script>
</body>
</html>